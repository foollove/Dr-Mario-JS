{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/board.js","webpack:///./src/dose.js","webpack:///./src/drmario.js","webpack:///./src/game.js","webpack:///./src/input.js","webpack:///./src/mario.js","webpack:///./src/pill.js","webpack:///./src/virus.js"],"names":["COLORS","Board","game","width","height","margin","squareWidth","squareHeight","level","numberViruses","grid","createEmptyGrid","viruses","Array","map","row","fill","total","added","rowAdjustment","Math","floor","lowestRow","rowRange","random","column","color","newVirus","Virus","coordinates","push","coords","bottleSide","bottleTop","yCoord","xCoord","xPos","yPos","x","y","pill","rotation","orientation","c0","c1","leftCoord","rightCoord","Dose","otherHalf","topCoord","bottomCoord","sqNumber","squares","currRow","sameColor","currSquare","currColor","currCol","coord","array","some","ele","fours","col","isEmpty","downResult","checkFourDown","acrossResult","checkFourAcross","concat","length","result","forEach","coordInArray","coordArray","scoreMultiplier","that","virusCount","item","otherHalfCoord","doseRow","doseCol","dose","deleteFromGame","single","addToGame","points","pow","score","Promise","resolve","reject","canFall","currItem","applied","applyGravity","window","setTimeout","then","toClear","findFours","deleteFromBoard","DOSE_SPRITES","red","yellow","blue","empty","options","spritesheet","position","board","getPosition","singleDoses","gameObjects","singleDoseIndex","indexOf","gameObjectsIndex","splice","console","log","nextRow","canDrop","timestamp","ctx","sprite","getSprite","drawImage","GAME_WIDTH","GAME_HEIGHT","MARGIN","SQR_WIDTH","SQR_HEIGHT","BOTTLE","printName","input","name","timing","i","innerText","slice","getLevel","num","playTheme","url","musicIsMuted","audio","document","createElement","muted","src","style","display","onended","remove","body","appendChild","play","addEventListener","muteButton","getElementById","startButton","removeEventListener","jsLogo","createdBy","myName","menuSidebar","opacity","classList","toggle","levelSlide","levelOutput","innerHTML","value","oninput","speedSlide","speedOutput","parseInt","canvas","getContext","marioCanvas","marioCtx","clearRect","miscellaneous","gameOptions","lostButton","wonButton","stageLevel","stageSpeed","Game","mario","Mario","add","start","gameLoop","update","draw","requestAnimationFrame","gameWidth","gameHeight","speed","paused","pillFalling","populateViruses","fallenPills","currentPill","generatePill","nextPill","levelDisplay","virusDisplay","scoreDisplay","stageInfo","currentHandler","InputHandler","playMusic","newPill","Pill","colors","modalId","modal","loop","autoplay","object","handleInput","bind","event","keyCode","preventDefault","moveLeft","moveRight","speedDrop","flipLeft","flipRight","MARIO_SPRITES","armUp","armMid","armDown","stance","offset","getXOffset","drawNextPill","COLOR_SPRITES","top","bottom","left","right","totalWidth","totalHeight","getOrientation","lastDrop","dropSpeed","stationary","connected","prevRow","prevCol","nextCol","canMoveLeft","canMoveRight","canFlip","newRotation","adjustFlip","freeze","recordPill","drop","removeListener","clearFours","wonGame","newStage","newGame","boardFull","loadNextPill","lostGame","fallenPillsIndex","sprites","getSprites","drawHorizontal","drawVertical","dropInterval","VIRUS_SPRITES","none","frame","lastUpdated","frameLength","gameVirusesIndex"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/drmario.js\");\n","import Virus from './virus';\nimport Dose from './dose';\n\nconst COLORS = [\"red\", \"yellow\", \"blue\"];\n\nexport default class Board {\n  constructor(game) {\n    this.width = 8;\n    this.height = 16;\n    this.game = game;\n    this.margin = game.margin;\n    this.squareWidth = game.squareWidth;\n    this.squareHeight = game.squareHeight;\n    this.level = game.level;  // we'll do levels 0 through 10\n    this.numberViruses = 4 * (this.level + 1);\n\n    this.grid = this.createEmptyGrid();\n    this.viruses = [];  // this will only be updated once; game keeps track of viruses\n  }\n\n  // methods for populating board at beginning of game\n\n  createEmptyGrid() {\n    const grid = [...Array(this.height)]\n      .map(row => Array(this.width).fill(null));\n\n    return grid;\n  }\n\n  populateViruses() {\n    let total = this.numberViruses;\n    let added = 0;\n\n    // only want to add viruses to uppermost rows if the level is very high\n    let rowAdjustment = 4 - Math.floor(this.level / 5);\n\n    let lowestRow = 3 + rowAdjustment;\n    let rowRange = 16 - lowestRow;\n\n    while (added < total) {\n      let row = Math.floor(Math.random() * rowRange) + lowestRow;\n      let column = Math.floor(Math.random() * this.width);\n      let color = COLORS[Math.floor(Math.random() * 3)];\n\n      if (this.grid[row][column] === null) {\n        let newVirus = new Virus({\n          game: this.game,\n          color: color,\n          coordinates: [row, column]\n        });\n\n        this.grid[row][column] = newVirus;\n        this.viruses.push(newVirus);\n        added += 1;\n      }\n    }\n\n    return this.viruses;\n  }\n\n  // methods for determining position, finding empty postns, saving pill to board\n\n  getPosition(coords) {\n    let margin = this.margin;\n    let bottleSide = 24;\n    let bottleTop = 115;\n    let [yCoord, xCoord] = coords;\n\n    let xPos = margin + bottleSide + (xCoord * (this.squareWidth + margin));\n    let yPos = margin + bottleTop + (yCoord * (this.squareHeight + margin));\n\n    return { x: xPos, y: yPos };\n  }\n\n  isEmpty(coords) {   // coords is an array in form of [row, column]\n    let [row, column] = coords;\n\n    if (column < 0 || column > 7) return false;   // outside of board\n    if (row < 0 || row > 15) return false;        // outside of board\n\n    if (this.grid[row][column] === null) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  boardFull() {\n    if (this.grid[0][3] || this.grid[0][4]) return true;\n    return false;\n  }\n\n  recordPill(pill) {\n    let [row, column] = pill.coordinates;\n    let rotation = pill.rotation;\n    let orientation = pill.orientation;\n\n    let c0 = pill.c0;\n    let c1 = pill.c1;\n\n    if (orientation === \"horizontal\") {\n      let leftCoord = [row, column];\n      let rightCoord = [row, column + 1];\n\n      if (rotation === 0) {\n        this.grid[row][column] = new Dose({\n          color: c0,\n          coordinates: leftCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: rightCoord\n        });\n        this.grid[row][column + 1] = new Dose({\n          color: c1,\n          coordinates: rightCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: leftCoord\n        });\n\n      } else if (rotation === 180) {\n        this.grid[row][column] = new Dose({\n          color: c1,\n          coordinates: leftCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: rightCoord\n        });\n        this.grid[row][column + 1] = new Dose({\n          color: c0,\n          coordinates: rightCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: leftCoord\n        });\n      }\n    } else if (orientation === \"vertical\") {\n      let topCoord = [row - 1, column];\n      let bottomCoord = [row, column];\n\n      if (rotation === 90) {\n        this.grid[row -1][column] = new Dose({\n          color: c0,\n          coordinates: topCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: bottomCoord\n        });\n        this.grid[row][column] = new Dose({\n          color: c1,\n          coordinates: bottomCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: topCoord\n        });\n\n      } else if (rotation === 270) {\n        this.grid[row - 1][column] = new Dose({\n          color: c1,\n          coordinates: topCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: bottomCoord\n        });\n        this.grid[row][column] = new Dose({\n          color: c0,\n          coordinates: bottomCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: topCoord\n        });\n      }\n    }\n  }\n\n  // methods for detecting 4+ of one color in a row (vert. or horiz.)\n\n  checkFourDown(coords) {\n    let [row, column] = coords;\n\n    let sqNumber = 1;\n    let squares = [coords];\n    let color = this.grid[row][column].color;\n\n    let currRow = row;\n    let sameColor = true;\n\n    while (sameColor && currRow <= 14) {\n      currRow += 1;\n      let currSquare = this.grid[currRow][column];\n\n      if (currSquare) {\n        let currColor = this.grid[currRow][column].color;\n  \n        if (currColor === color) {\n          sqNumber += 1;\n          squares.push([currRow, column]);\n        } else {\n          sameColor = false;\n        }\n      } else {\n        sameColor = false;\n      }\n    }\n\n    if (sqNumber >= 4) {\n      return squares;\n    } else {\n      return false;\n    }\n\n  }\n\n  checkFourAcross(coords) {\n    let [row, column] = coords;\n\n    let sqNumber = 1;\n    let squares = [coords];\n    let color = this.grid[row][column].color;\n\n    let currCol = column;\n    let sameColor = true;\n\n    while (sameColor && currCol <= 6) {\n      currCol += 1;\n      let currSquare = this.grid[row][currCol];\n\n      if (currSquare) {\n        let currColor = this.grid[row][currCol].color;\n\n        if (currColor === color) {\n          sqNumber += 1;\n          squares.push([row, currCol]);\n        } else {\n          sameColor = false;\n        }\n      } else {\n        sameColor = false;\n      }\n    }\n\n    if (sqNumber >= 4) {\n      return squares;\n    } else {\n      return false;\n    }\n  }\n\n  coordInArray(coord, array) {\n    return array.some(ele => ele[0] === coord[0] && ele[1] === coord[1]);\n  }\n\n  findFours() {\n    let fours = [];\n    \n    for (let row = 0; row <= 15; row++) {\n      for (let col = 0; col <= 7; col++) {\n        let coords = [row, col];\n\n        if (!this.isEmpty(coords)) {\n          let downResult = this.checkFourDown(coords);\n          let acrossResult = this.checkFourAcross(coords);\n\n          if (downResult) {\n            fours = fours.concat(downResult);\n          }\n          if (acrossResult) {\n            fours = fours.concat(acrossResult);\n          }\n        }\n      }   \n    }\n\n    if (fours.length === 0) return null;\n\n    let result = [];   // need to eliminate duplicate coordinates from result\n\n    fours.forEach(coord => {\n      if (!this.coordInArray(coord, result)) {\n        result.push(coord);\n      }\n    });\n\n    return result;\n  }\n\n  isVirus(coord) {\n\n  }\n\n  deleteFromBoard(coordArray, scoreMultiplier = 0) {\n    let that = this;\n\n    var virusCount = 0;\n\n    coordArray.forEach(coord => {\n      let [row, column] = coord;\n      let item = that.grid[row][column];\n\n      if (item instanceof Virus) virusCount += 1;\n\n      if (item instanceof Dose && item.pill) {\n          let pill = item.pill;\n          let otherHalfCoord = item.otherHalf;\n\n          let [doseRow, doseCol] = otherHalfCoord;\n          let dose = that.grid[doseRow][doseCol];\n\n          // delete pill\n          pill.deleteFromGame();\n          dose.pill = null;\n          dose.otherHalf = null;\n\n          // add dose to game to display\n          dose.single = true;\n          dose.addToGame();\n      } else {\n        item.deleteFromGame();\n      }\n\n      that.grid[row][column] = null;\n    });\n\n    if (virusCount > 0) {\n      let points = Math.pow(3, virusCount) * 100 + scoreMultiplier;\n      if (points > 5000) points = 5000;\n      this.game.score += points;\n    }\n  }\n\n  applyGravity() {\n    return new Promise((resolve, reject) => {\n      var canFall = false;\n  \n      for (let row = 14; row >= 0; row--) {\n        for (let col = 0; col <= 7; col++) {\n          let currItem = this.grid[row][col];\n          var applied;\n  \n          if (currItem instanceof Dose && currItem.pill) {\n            let pill = currItem.pill;\n            applied = pill.applyGravity();\n            if (applied) canFall = true;\n          } else if (currItem instanceof Dose && currItem.single) {\n            applied = currItem.applyGravity();\n            if (applied) canFall = true;\n          }\n        }\n      }\n  \n      if (canFall) {\n        window.setTimeout(() => {\n          this.applyGravity().then(() => {\n            resolve(true);\n          })\n        }, 250);\n      } else {\n        window.setTimeout(() => {\n          resolve(true);\n        }, 100);\n      }\n    })\n\n  }\n\n  clearFours(scoreMultiplier = 0) {\n    let toClear = this.findFours();\n\n    if (toClear) {\n      this.deleteFromBoard(toClear, scoreMultiplier);\n    } \n  }\n\n}","const DOSE_SPRITES = {\n  single: {\n    red: [0, 40, 7, 7],\n    yellow: [8, 40, 7, 7],\n    blue: [16, 40, 7, 7]\n  },\n\n  empty: {\n    red: [0, 48, 7, 7],\n    yellow: [8, 48, 7, 7],\n    blue: [16, 48, 7, 7]\n  }\n}\n\nexport default class Dose {\n  constructor(options) {\n    this.color = options.color;\n    this.coordinates = options.coordinates;\n    this.pill = options.pill || null;\n    this.otherHalf = options.otherHalf || null;\n    this.single = options.single || false;\n\n    this.game = options.game;\n    this.spritesheet = this.game.spritesheet;\n\n    this.position = this.game.board.getPosition(this.coordinates);\n    this.width = options.game.squareWidth;\n    this.height = options.game.squareHeight;\n  }\n\n  addToGame() {\n    this.game.singleDoses.push(this);\n    this.game.gameObjects.push(this);\n  }\n\n  deleteFromGame() {\n    let singleDoseIndex = this.game.singleDoses.indexOf(this);\n    let gameObjectsIndex = this.game.gameObjects.indexOf(this);\n\n    this.game.singleDoses.splice(singleDoseIndex, 1);\n    this.game.gameObjects.splice(gameObjectsIndex, 1);\n\n    // console.log(singleDoseIndex);\n    // console.log(gameObjectsIndex);\n  }\n  \n  canDrop() {\n    if (!this.single) {\n      console.log('this method is not for pills!!!!');\n      return null;\n    }\n\n    let [currRow, currCol] = this.coordinates;\n    let nextRow = currRow + 1;\n\n    if (this.game.board.isEmpty([nextRow, currCol])) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  \n  applyGravity() {\n    if (!this.single) {\n      console.log('this method is not for pills!!!!');\n      return null;\n    }\n    \n    if (this.canDrop()) {\n      let [currRow, currCol] = this.coordinates;\n      let nextRow = currRow + 1;\n\n      this.coordinates[0] += 1;\n      this.position = this.game.board.getPosition(this.coordinates);\n\n      this.game.board.grid[currRow][currCol] = null;\n      this.game.board.grid[nextRow][currCol] = this;\n\n      return true;\n    }\n    return false;\n  }\n\n  // display for single doses only\n\n  getSprite() {\n    let color = this.color;\n    return DOSE_SPRITES.single[color];\n  }\n\n  update(timestamp) {\n\n  }\n\n  draw(ctx) {\n    const sprite = this.getSprite();\n    ctx.drawImage(\n      this.spritesheet,\n      sprite[0],\n      sprite[1],\n      sprite[2],\n      sprite[3],\n      this.position.x,\n      this.position.y,\n      this.width,\n      this.height\n    )\n  }\n}","import Game from './game';\nimport Mario from './mario';\n\nconst GAME_WIDTH = 250;\nconst GAME_HEIGHT = 492;\nconst MARGIN = 3;\n\nconst SQR_WIDTH = 25 - MARGIN;\nconst SQR_HEIGHT = 22 - MARGIN;\n\nconst BOTTLE = [153, 290, 78, 174];\n\n\nconst printName = function(input) {\n  const name = \"KEVIN MOCH\";\n  const timing = 100;\n  setTimeout(function() {\n    for (let i = 1; i <= name.length; i++) {\n      (function(i) {\n        setTimeout(function() {\n          input.innerText = name.slice(0, i)\n        }, timing * i)\n      })(i);\n    }\n  }, 1000);\n}\n\nconst getLevel = function(num) {\n  switch (num) {\n    case 1:\n      return \"Slow\";\n    case 2:\n      return \"Medium\";\n    case 3:\n      return \"Fast\";\n    case 4:\n      return \"Faster\";\n    case 5:\n      return \"Fastest\";\n  }\n}\n\nconst playTheme = function (url, musicIsMuted) {\n  let audio = document.createElement('audio');\n\n  if (musicIsMuted) {\n    audio.muted = true;\n  }\n\n  audio.src = url;\n  audio.style.display = \"none\";\n  audio.onended = function () {\n    audio.remove();\n  };\n  document.body.appendChild(audio);\n\n  const play = function() {\n    audio.play();\n  }\n  document.addEventListener('click', play);\n\n  let muteButton = document.getElementById('mute-music');\n  muteButton.addEventListener('click', () => {\n    audio.muted = !audio.muted;\n    // console.log('paused?');\n  });\n\n  let startButton = document.getElementById('start-button');\n  startButton.addEventListener('click', () => {\n    document.removeEventListener('click', play);\n    audio.remove();\n  });\n}\n\n/*\nconst startGameLoop = function(levelSlide, speedSlide, gameWidth, gameHeight,\n  margin, sqrWidth, sqrHeight, gameSpritesheet, marioSpritesheet, bottle, ctx, \n  marioCtx) {\n    let stageLevel = parseInt(levelSlide.value);\n    let stageSpeed = parseInt(speedSlide.value);\n  \n    let game = new Game(\n      gameWidth,\n      gameHeight,\n      margin,\n      sqrWidth,\n      sqrHeight,\n      gameSpritesheet,\n      stageLevel,\n      stageSpeed\n    );\n  \n    let mario = new Mario({\n      spritesheet: marioSpritesheet,\n      game: game\n    });\n\n    let gameOptions = document.getElementById('to-mute');\n    let startButton = document.getElementById('start-button');\n  \n    gameOptions.classList.add('muted');\n    startButton.innerText = \"RESTART\";\n  \n    const ctx2 = ctx;\n    const marioCtx2 = marioCtx;\n\n    game.start();\n  \n    function gameLoop(timestamp) {\n      ctx2.clearRect(0, 0, gameWidth, gameHeight);\n      ctx2.drawImage(marioSpritesheet,\n        bottle[0], bottle[1], bottle[2], bottle[3],\n        0, 0, gameWidth, gameHeight);\n  \n      game.update(timestamp);\n      game.draw(ctx2);\n      mario.draw(marioCtx2);\n  \n      requestAnimationFrame(gameLoop);\n    }\n  \n  requestAnimationFrame(gameLoop);\n}\n*/\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  // fade in elements while waiting for font to load\n  const jsLogo = document.getElementById(\"logo-js\");\n  const createdBy = document.getElementById('created-by');\n  const myName = document.getElementById('kevin-moch');\n  const menuSidebar = document.getElementById('menu-sidebar');\n\n  window.setTimeout(()=> {\n    jsLogo.style.color = \"black\";\n    createdBy.style.opacity = 1;\n    printName(myName);\n    window.setTimeout(() => {\n      menuSidebar.style.opacity = 1;\n    }, 1000);\n  }, 100);\n\n\n  // set up mute button\n  var musicIsMuted = false;\n  let muteButton = document.getElementById('mute-music');\n  muteButton.addEventListener('click', () => {\n    musicIsMuted = !musicIsMuted;\n    muteButton.classList.toggle('sound-off');\n    // console.log(musicIsMuted);\n  });\n\n  // listener to adjust the displayed level\n  const levelSlide = document.getElementById(\"level-slide\");\n  const levelOutput = document.getElementById(\"curr-level\");\n  levelOutput.innerHTML = levelSlide.value;\n\n  levelSlide.oninput = function () {\n    levelOutput.innerHTML = this.value;\n  };\n\n  // listener to adjust the displayed speed\n  const speedSlide = document.getElementById(\"speed-slide\");\n  const speedOutput = document.getElementById(\"curr-speed\");\n  speedOutput.innerHTML = getLevel(parseInt(speedSlide.value));\n\n  speedSlide.oninput = function () {\n    speedOutput.innerHTML = getLevel(parseInt(this.value));\n  }\n\n  // grabbing canvases and canvas contexts\n  const canvas = document.getElementById(\"gameScreen\");\n  const ctx = canvas.getContext(\"2d\");\n\n  const marioCanvas = document.getElementById(\"dr-mario-canvas\");\n  const marioCtx = marioCanvas.getContext('2d');\n\n  ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);\n\n  // grabbing spritesheets\n  let miscellaneous = document.getElementById(\"miscellaneous\");\n  let spritesheet = document.getElementById(\"spritesheet\");\n\n  spritesheet.addEventListener(\"load\", () => {\n\n    ctx.drawImage(miscellaneous,\n      BOTTLE[0], BOTTLE[1], BOTTLE[2], BOTTLE[3],\n      0, 0, GAME_WIDTH, GAME_HEIGHT);\n\n    let gameOptions = document.getElementById('game-options');\n    let startButton = document.getElementById('start-button');\n\n\n    // start music and associated event listeners\n    playTheme('./assets/sounds/Dr_Mario_Theme.mp3', musicIsMuted);\n    \n    let lostButton = document.getElementById('lost-game');\n    let wonButton = document.getElementById('won-game');\n\n    lostButton.addEventListener('click', () => {\n      playTheme('./assets/sounds/Dr_Mario_Theme.mp3', musicIsMuted);\n    });\n    wonButton.addEventListener('click', () => {\n      playTheme('./assets/sounds/Dr_Mario_Theme.mp3', musicIsMuted);\n    });\n\n    // event listener on start button to start game;\n\n    // startGameLoop(levelSlide, speedSlide, GAME_WIDTH, GAME_HEIGHT, MARGIN,\n    //   SQR_WIDTH, SQR_HEIGHT, spritesheet, miscellaneous, BOTTLE, gameOptions,\n    //   startButton, ctx, marioCtx);\n\n    // startButton.addEventListener('click', startGameLoop.bind(null, event, \n    //   levelSlide, speedSlide, GAME_WIDTH, GAME_HEIGHT, MARGIN, SQR_WIDTH, \n    //   SQR_HEIGHT, spritesheet, miscellaneous, BOTTLE, ctx, marioCtx));\n\n    \n    startButton.addEventListener('click', () => {\n      let stageLevel = parseInt(levelSlide.value);\n      let stageSpeed = parseInt(speedSlide.value);\n\n      let game = new Game(\n        GAME_WIDTH, \n        GAME_HEIGHT,\n        MARGIN, \n        SQR_WIDTH, \n        SQR_HEIGHT, \n        spritesheet,\n        stageLevel,\n        stageSpeed\n      );\n  \n      let mario = new Mario({\n        spritesheet: miscellaneous,\n        game: game\n      });\n\n      gameOptions.classList.add('muted');\n      startButton.innerText = \"RESTART\";\n  \n      game.start(musicIsMuted);\n\n      function gameLoop(timestamp) {\n        ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);\n        ctx.drawImage(miscellaneous, \n          BOTTLE[0], BOTTLE[1], BOTTLE[2], BOTTLE[3], \n          0, 0, GAME_WIDTH, GAME_HEIGHT);\n  \n        game.update(timestamp);\n        game.draw(ctx);\n        mario.draw(marioCtx);\n  \n        requestAnimationFrame(gameLoop);\n      }\n      \n      requestAnimationFrame(gameLoop);\n    });\n    \n  });\n});","import InputHandler from './input';\nimport Board from './board';\nimport Pill from './pill';\n\nconst COLORS = [\"red\", \"yellow\", \"blue\"];\n\nexport default class Game {\n\n  constructor(gameWidth, gameHeight, margin, squareWidth, squareHeight, \n      spritesheet, level, speed) {\n    this.gameWidth = gameWidth;\n    this.gameHeight = gameHeight;\n    this.margin = margin;\n    this.squareWidth = squareWidth;\n    this.squareHeight = squareHeight;\n    this.spritesheet = spritesheet;\n    this.level = level ? level : 0;\n    this.speed = speed ? speed : 1;\n    this.paused = false;\n    this.pillFalling = false;\n    this.score = 0;\n\n    this.board = new Board(this);\n    this.viruses = this.board.populateViruses();\n\n    this.fallenPills = [];\n    this.singleDoses = [];\n\n    this.currentPill = this.generatePill();\n    this.nextPill = this.generatePill();\n  }\n\n  start(musicIsMuted) {\n    let levelDisplay = document.getElementById('stage-level-display');\n    levelDisplay.innerText = this.level;\n\n    this.virusDisplay = document.getElementById('stage-viruses-display');\n    this.virusDisplay.innerText = this.viruses.length;\n\n    this.scoreDisplay = document.getElementById('stage-score-display');\n    this.scoreDisplay.innerText = this.score;\n\n    let stageInfo = document.getElementById('stage-info');\n    stageInfo.classList.toggle('hidden');\n\n    // let pauseButton = document.getElementById('pause-button');\n    // pauseButton.addEventListener('click', () => {\n    //   this.paused = !this.paused;\n    // });\n\n    this.gameObjects = [\n      ...this.viruses,\n      ...this.fallenPills,\n      ...this.singleDoses,\n      this.currentPill\n    ];\n\n    this.currentHandler = new InputHandler(this.currentPill);\n    this.playMusic('./assets/sounds/Fever_music.mp3', musicIsMuted);\n  }\n\n  generatePill() {\n    let c0 = COLORS[Math.floor(Math.random() * 3)];\n    let c1 = COLORS[Math.floor(Math.random() * 3)];\n\n    let newPill = new Pill({\n      colors: [c0, c1],\n      game: this\n    });\n\n    return newPill;\n  }\n\n  loadNextPill() {\n    const that = this;\n\n    window.setTimeout(function(){\n      that.currentPill = that.nextPill;\n      that.gameObjects.push(that.currentPill);\n      that.currentHandler = new InputHandler(that.currentPill);\n\n      that.nextPill = that.generatePill();\n      that.pillFalling = false;  // only for passive falling i.e. gravity\n    }, 100);\n  }\n\n  // game utility fxx\n\n  // pause() {\n  //   if (!this.pillFalling) {\n  //     this.paused = !this.paused;\n  //   }\n  // }\n\n  newGame(modalId) {\n    let modal = document.getElementById(modalId);\n    let gameOptions = document.getElementById('game-options');\n    let startButton = document.getElementById('start-button');\n    \n    modal.classList.add('hidden');\n    gameOptions.classList.remove('muted');\n    startButton.innerText = \"START\";\n  }\n\n  playMusic(url, musicIsMuted) {\n    let audio = document.createElement('audio');\n\n    if (musicIsMuted) {\n      audio.muted = true;\n    }\n\n    audio.src = url;\n    audio.style.display = \"none\";\n    audio.loop = \"true\";\n    audio.autoplay = \"true\";\n    document.body.appendChild(audio);\n\n    let muteButton = document.getElementById('mute-music');\n    muteButton.addEventListener('click', () => {\n      audio.muted = !audio.muted;\n    });\n\n    let lostButton = document.getElementById('lost-game');\n    let wonButton = document.getElementById('won-game');\n    let startButton = document.getElementById('start-button');\n\n    lostButton.addEventListener('click', () => {\n      audio.remove();\n    });\n    wonButton.addEventListener('click', () => {\n      audio.remove();\n    });\n    startButton.addEventListener('click', () => {\n      audio.remove();\n    })\n  }\n\n  update(timestamp) {\n    this.virusDisplay.innerText = this.viruses.length;\n    this.scoreDisplay.innerText = this.score;\n    // if (this.paused) return;\n    this.gameObjects.forEach(object => object.update(timestamp));\n  }\n\n  draw(ctx) {\n    this.gameObjects.forEach(object => object.draw(ctx));\n  }\n}","export default class InputHandler {\n  constructor(pill) {\n    \n    this.pill = pill;\n    this.handleInput = this.handleInput.bind(this);\n\n    document.addEventListener(\"keydown\", this.handleInput);\n\n    /*\n    document.addEventListener(\"keydown\", (event) => {\n      switch (event.keyCode) {\n        case 74:\n          pill.moveLeft();\n          break;\n        case 76:\n          pill.moveRight();\n          break;\n        case 75:\n          pill.speedDrop();\n          break;\n        case 83:\n          pill.flipLeft();\n          break;\n        case 70:\n          pill.flipRight();\n          break;\n      }\n    });\n    */\n  }\n\n  handleInput(event) {\n    switch (event.keyCode) {\n      case 74:\n        event.preventDefault();\n        this.pill.moveLeft();\n        break;\n      case 37:\n        event.preventDefault();\n        this.pill.moveLeft();\n        break;\n      case 76:\n        event.preventDefault();\n        this.pill.moveRight();\n        break;\n      case 39:\n        event.preventDefault();\n        this.pill.moveRight();\n        break;\n      case 75:\n        event.preventDefault();\n        this.pill.speedDrop();\n        break;\n      case 40:\n        event.preventDefault();\n        this.pill.speedDrop();\n        break;\n      case 83:\n        event.preventDefault();\n        this.pill.flipLeft();\n        break;\n      case 70:\n        event.preventDefault();\n        this.pill.flipRight();\n        break;\n      case 32:\n        event.preventDefault();\n      //   if (!this.pill.game.pillFalling) {\n      //     this.pill.game.pause();\n      //   }\n      //   break;\n    }\n  }\n\n  removeListener() {\n    document.removeEventListener(\"keydown\", this.handleInput);\n  }\n}","const MARIO_SPRITES = {\n  armUp: [0, 201, 23, 39],\n  armMid: [25, 201, 30, 39],\n  armDown: [65, 201, 22, 39]\n}\n\nexport default class Mario {\n  constructor(options) {\n    this.spritesheet = options.spritesheet\n    this.stance = \"armUp\";\n    this.game = options.game;\n  }\n\n  getSprite() {\n    return MARIO_SPRITES[this.stance];\n  }\n\n  getXOffset() {\n    switch (this.stance) {\n      case \"armMid\":\n        return 0;\n      case \"armUp\":\n        return 7;\n      case \"armDown\":\n        return 8;\n    }\n  }\n\n  draw(ctx) {\n    let sprite = this.getSprite();\n    let offset = this.getXOffset() * 3;\n    let nextPill = this.game.nextPill;\n    ctx.drawImage(\n      spritesheet,\n      sprite[0],\n      sprite[1],\n      sprite[2],\n      sprite[3],\n      30 + offset,\n      15,\n      90 - offset,\n      116\n    );\n    nextPill.drawNextPill(ctx);\n  }\n}","/* game_width = 202 (8sq.);   game_height = 354 (16sq.); */\n/* sq_width = 23px (25);      sq_height = 20px (22); */\n\nconst COLOR_SPRITES = {\n  top: {\n    red: [0, 8, 7, 7],\n    yellow: [8, 8, 7, 7],\n    blue: [16, 8, 7, 7]\n  },\n\n  bottom: {\n    red: [0, 16, 7, 7],\n    yellow: [8, 16, 7, 7],\n    blue: [16, 16, 7, 7]\n  },\n\n  left: {\n    red: [0, 24, 7, 7],\n    yellow: [8, 24, 7, 7],\n    blue: [16, 24, 7, 7]\n  },\n\n  right: {\n    red: [0, 32, 7, 7],\n    yellow: [8, 32, 7, 7],\n    blue: [16, 32, 7, 7]\n  },\n\n  single: {\n    red: [0, 40, 7, 7],\n    yellow: [8, 40, 7, 7],\n    blue: [16, 40, 7, 7]\n  },\n\n  empty: {\n    red: [0, 48, 7, 7],\n    yellow: [8, 48, 7, 7],\n    blue: [16, 48, 7, 7]\n  }\n}\n\nexport default class Pill {\n  constructor(options) {\n    this.gameWidth = options.game.gameWidth;\n    this.gameHeight = options.game.gameHeight;\n    this.width = options.game.squareWidth;\n    this.height = options.game.squareHeight;\n    this.margin = options.game.margin;\n    this.totalWidth = this.width + this.margin;\n    this.totalHeight = this.height + this.margin;\n    this.spritesheet = options.game.spritesheet;\n    this.board = options.game.board;\n    this.game = options.game;\n\n    this.c0 = options.colors[0];\n    this.c1 = options.colors[1];\n\n    this.coordinates = [0, 3];  // coordinates[0]= y/row, coordinates[1]= x/col\n    this.position = this.board.getPosition(this.coordinates);\n\n    this.rotation = 0;\n    this.orientation = this.getOrientation();\n    this.lastDrop = null;\n    this.dropSpeed = options.game.speed;\n\n    this.stationary = false;\n    this.connected = true;\n  }\n\n  // methods involved in changing pill's instance variables/own state\n\n  getOrientation() {\n    switch (this.rotation) {\n      case 0:\n        return \"horizontal\";\n      case 90:\n        return \"vertical\";\n      case 180:\n        return \"horizontal\";\n      case 270:\n        return \"vertical\";\n    }\n  }\n\n  canMoveLeft() {\n    let [currRow, currCol] = this.coordinates;\n    let prevRow = currRow - 1;\n    let prevCol = currCol - 1;\n\n    if (this.orientation === \"horizontal\") {\n      if (this.board.isEmpty([currRow, prevCol])) {\n        return true;\n      } else {\n        return false;\n      }\n    } else if (this.orientation === \"vertical\") {\n      if (this.board.isEmpty([currRow, prevCol]) && \n        this.board.isEmpty([prevRow, prevCol])) {\n          return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  canMoveRight() {\n    let [currRow, currCol] = this.coordinates;\n    let prevRow = currRow - 1;\n    let nextCol = currCol + 1;\n\n    if (this.orientation === \"horizontal\") {\n      if (this.board.isEmpty([currRow, nextCol]) &&\n        this.board.isEmpty([currRow, nextCol + 1])) {\n          return true;\n      } else {\n        return false;\n      }\n    } else if (this.orientation === \"vertical\") {\n      if (this.board.isEmpty([currRow, nextCol]) &&\n        this.board.isEmpty([prevRow, nextCol])) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  moveLeft() {\n    if (this.game.paused) return;\n\n    if (!this.stationary && this.canMoveLeft()) {\n      this.coordinates[1] -= 1;\n      this.position = this.board.getPosition(this.coordinates);\n    }\n  }\n\n  moveRight() {\n    if (this.game.paused) return;\n\n    if (!this.stationary && this.canMoveRight()) {\n      if ((this.orientation === \"horizontal\" && this.coordinates[1] < 6) ||\n        (this.orientation === \"vertical\" && this.coordinates[1] < 7)) {\n        this.coordinates[1] += 1;\n        this.position = this.board.getPosition(this.coordinates);\n      }\n    }\n  }\n\n  canFlip() {\n    let [currRow, currCol] = this.coordinates;\n    let prevRow = currRow - 1;\n    let prevCol = currCol - 1;\n    let nextRow = currRow + 1;\n    let nextCol = currCol + 1;\n\n    if (this.orientation === \"horizontal\") {\n      if (!this.board.isEmpty([prevRow, currCol]) &&\n        !this.board.isEmpty([prevRow, nextCol]) &&\n        !this.board.isEmpty([nextRow, currCol]) &&\n        !this.board.isEmpty([nextRow, nextCol])) {\n          return false;\n        } else {\n          return true;\n        }\n    } else if (this.orientation === \"vertical\") {\n      if (!this.board.isEmpty([prevRow, prevCol]) &&\n        !this.board.isEmpty([currRow, prevCol]) &&\n        !this.board.isEmpty([prevRow, nextCol]) &&\n        !this.board.isEmpty([currRow, nextCol])) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  }\n\n  adjustFlip() {\n    let [currRow, currCol] = this.coordinates;\n    let prevRow = currRow - 1;\n    let prevCol = currCol - 1;\n    let nextRow = currRow + 1;\n    let nextCol = currCol + 1;\n\n    if (this.orientation === \"vertical\") {\n      if (!this.board.isEmpty([prevRow, currCol])) {\n        if (!this.board.isEmpty([nextRow, currCol])) {\n          if (!this.board.isEmpty([prevRow, nextCol])) {\n            this.coordinates = [nextRow, nextCol];\n            this.position = this.board.getPosition(this.coordinates);\n          } else {\n            this.coordinates = [currRow, nextCol];\n            this.position = this.board.getPosition(this.coordinates);\n          }\n        } else {\n          this.coordinates = [nextRow, currCol];\n          this.position = this.board.getPosition(this.coordinates);\n        }\n      } \n    } else if (this.orientation === \"horizontal\") {\n      if (!this.board.isEmpty([currRow, nextCol])) {\n        if (!this.board.isEmpty([currRow, prevCol])) {\n          if (!this.board.isEmpty([prevRow, nextCol])) {\n            this.coordinates = [prevRow, prevCol];\n            this.position = this.board.getPosition(this.coordinates);\n          } else {\n            this.coordinates = [prevRow, currCol];\n            this.position = this.board.getPosition(this.coordinates);\n          }\n        } else {\n          this.coordinates = [currRow, prevCol];\n          this.position = this.board.getPosition(this.coordinates);\n        }\n      } \n    }\n  }\n\n  flipLeft() {\n    if (this.game.paused) return;\n\n    if (!this.stationary && this.canFlip()) {\n      let newRotation = this.rotation - 90;\n      this.rotation = (newRotation >= 0) ? \n        newRotation : \n        (((this.rotation - 90) % 360) + 360) % 360; // funkiness of % with negs\n      this.orientation = this.getOrientation();\n\n      this.adjustFlip();\n    }\n  }\n\n  flipRight() {\n    if (this.game.paused) return;\n\n    if (!this.stationary && this.canFlip()) {\n      this.rotation = (this.rotation + 90) % 360;\n      this.orientation = this.getOrientation();\n\n      this.adjustFlip();\n    }\n  }\n\n  canDrop() {\n    let [currRow, currCol] = this.coordinates;\n    let nextRow = currRow + 1;\n    let nextCol = currCol + 1;\n\n    if (this.orientation === \"horizontal\") {\n      if (this.board.isEmpty([nextRow, currCol]) && \n        this.board.isEmpty([nextRow, nextCol])) {\n          return true;\n        } else {\n          return false;\n        }\n    } else if (this.orientation === \"vertical\") {\n      if (this.board.isEmpty([nextRow, currCol])) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  drop() {\n    if (this.canDrop()) {\n      this.coordinates[0] += 1;\n      this.position = this.board.getPosition(this.coordinates);\n    } else {\n      this.freeze();\n    }\n  }\n\n  applyGravity() {\n    // console.log('apply gravity method');\n\n    if (this.canDrop()) {\n      let [currRow, currCol] = this.coordinates;\n      let prevRow = currRow - 1;\n      // let nextRow = currRow + 1;\n      let nextCol = currCol + 1;\n\n      this.coordinates[0] += 1;\n      this.position = this.board.getPosition(this.coordinates);\n\n      if (this.orientation === \"horizontal\") {\n        this.board.grid[currRow][currCol] = null;\n        this.board.grid[currRow][nextCol] = null;\n      } else if (this.orientation === \"vertical\") {\n        this.board.grid[prevRow][currCol] = null;\n        this.board.grid[currRow][currCol] = null;\n      }\n\n      this.board.recordPill(this);\n      return true;\n    }\n    return false;\n  }\n\n  speedDrop() {\n    if (this.game.paused) return;\n    this.drop();\n    // this.lastDrop = new Date().getTime();\n  }\n\n  freeze() {\n    this.stationary = true;\n    this.game.pillFalling = true;\n    this.game.fallenPills.push(this);\n    this.game.currentHandler.removeListener();\n\n    this.board.recordPill(this);\n    this.board.clearFours();\n\n    // console.log(this.board.applyGravity());\n\n    this.board.applyGravity()\n      .then(() => {\n        this.board.clearFours(500);\n        return this.board.applyGravity()\n      }).then(() => {\n        this.board.clearFours(1000);\n        return this.board.applyGravity()\n      }).then(() => {\n        if (this.game.viruses.length === 0) {\n          let wonGame = document.getElementById('won-game');\n          wonGame.classList.remove('hidden');\n\n          let newStage = document.getElementById('new-stage');\n          newStage.addEventListener('click', () => {\n            this.game.newGame('won-game');\n          })\n\n        } else if (!this.board.boardFull()) {\n          this.game.loadNextPill();\n        } else {\n          let lostGame = document.getElementById('lost-game');\n          lostGame.classList.remove('hidden');\n\n          let newGame = document.getElementById('new-game');\n          newGame.addEventListener('click', () => {\n            this.game.newGame('lost-game');\n          })\n        }\n      })\n  }\n\n  deleteFromGame() {\n    let fallenPillsIndex = this.game.fallenPills.indexOf(this);\n    let gameObjectsIndex = this.game.gameObjects.indexOf(this);\n\n    this.game.fallenPills.splice(fallenPillsIndex, 1);\n    this.game.gameObjects.splice(gameObjectsIndex, 1);\n  }\n\n  // methods involved in displaying/drawing the pills\n\n  getSprites() {\n    let left, right, top, bottom;\n    let c0 = this.c0;\n    let c1 = this.c1;\n\n    if (this.rotation === 0) {\n      left = COLOR_SPRITES.left[c0];\n      right = COLOR_SPRITES.right[c1];\n      return { left: left, right: right };\n    } else if (this.rotation === 180) {\n      left = COLOR_SPRITES.left[c1];\n      right = COLOR_SPRITES.right[c0];\n      return { left: left, right: right };\n    } else if (this.rotation === 90) {\n      top = COLOR_SPRITES.top[c0];\n      bottom = COLOR_SPRITES.bottom[c1];\n      return { top: top, bottom: bottom };\n    } else if (this.rotation === 270) {\n      top = COLOR_SPRITES.top[c1];\n      bottom = COLOR_SPRITES.bottom[c0];\n      return { top: top, bottom: bottom};\n    }\n  }\n\n  drawHorizontal(ctx) {\n    let sprites = this.getSprites();\n    ctx.drawImage(\n      spritesheet,\n      sprites.left[0],\n      sprites.left[1],\n      sprites.left[2],\n      sprites.left[3],\n      this.position.x,\n      this.position.y,\n      this.width,\n      this.height\n    );\n    ctx.drawImage(\n      spritesheet,\n      sprites.right[0],\n      sprites.right[1],\n      sprites.right[2],\n      sprites.right[3],\n      this.position.x + 25,\n      this.position.y,\n      this.width,\n      this.height\n    );\n  }\n\n  drawVertical(ctx) {\n    let sprites = this.getSprites();\n    ctx.drawImage(\n      spritesheet,\n      sprites.top[0],\n      sprites.top[1],\n      sprites.top[2],\n      sprites.top[3],\n      this.position.x,\n      this.position.y - 22,\n      this.width,\n      this.height\n    );\n    ctx.drawImage(\n      spritesheet,\n      sprites.bottom[0],\n      sprites.bottom[1],\n      sprites.bottom[2],\n      sprites.bottom[3],\n      this.position.x,\n      this.position.y,\n      this.width,\n      this.height\n    );\n  }\n\n  drawNextPill(ctx) {\n    let sprites = this.getSprites();\n    ctx.drawImage(\n      spritesheet,\n      sprites.left[0],\n      sprites.left[1],\n      sprites.left[2],\n      sprites.left[3],\n      27,\n      2,\n      this.width,\n      this.height\n    );\n    ctx.drawImage(\n      spritesheet,\n      sprites.right[0],\n      sprites.right[1],\n      sprites.right[2],\n      sprites.right[3],\n      27 + 25,\n      2,\n      this.width,\n      this.height\n    );\n  }\n\n  draw(ctx) {\n    if (this.orientation === \"horizontal\") {\n      this.drawHorizontal(ctx);\n    } else if (this.orientation === \"vertical\") {\n      this.drawVertical(ctx);\n    }\n  }\n\n  update(timestamp) {\n    if (!this.lastDrop) this.lastDrop = timestamp;\n\n    if (!this.stationary) {\n      let dropInterval = 1200 - (200 * this.dropSpeed);\n  \n      if ((timestamp - this.lastDrop) > dropInterval) {\n        this.drop();\n        this.lastDrop = timestamp;\n      }\n    }\n\n  }\n}","const VIRUS_SPRITES = {\n  red: {\n    0: [0, 88, 7, 7],\n    1: [0, 96, 7, 7]\n  },\n\n  yellow: {\n    0: [0, 112, 7, 7],\n    1: [0, 120, 7, 7]\n  },\n\n  blue: {\n    0: [0, 136, 7, 7],\n    1: [0, 144, 7, 7]\n  },\n\n  none: {\n    0: [108, 260, 8, 8]\n  }\n}\n\nexport default class Virus {\n  constructor(options) {\n    this.color = options.color;\n    this.coordinates = options.coordinates;\n    this.spritesheet = options.game.spritesheet;\n    this.width = options.game.squareWidth;\n    this.height = options.game.squareHeight;\n    this.margin = options.game.margin;\n    this.board = options.game.board;\n    this.game = options.game;\n\n    this.position = this.board.getPosition(this.coordinates);\n\n    this.frame = 0;\n    this.lastUpdated = null;\n    this.frameLength = 250;\n  }\n\n  deleteFromGame() {\n    let gameVirusesIndex = this.game.viruses.indexOf(this);\n    let gameObjectsIndex = this.game.gameObjects.indexOf(this);\n\n    this.game.viruses.splice(gameVirusesIndex, 1);\n    this.game.gameObjects.splice(gameObjectsIndex, 1);\n  }\n\n  getSprite() {\n    const frame = this.frame;\n    switch(this.color) {\n      case \"red\":\n        return VIRUS_SPRITES.red[frame];\n      case \"yellow\":\n        return VIRUS_SPRITES.yellow[frame];\n      case \"blue\":\n        return VIRUS_SPRITES.blue[frame];\n      default:\n        return VIRUS_SPRITES.none[frame];\n    }\n  }\n\n  update(timestamp) {\n    if (!this.lastUpdated) this.lastUpdated = timestamp;\n\n    if ((timestamp - this.lastUpdated) > this.frameLength) {\n      this.frame = (this.frame + 1) % 2;\n      this.lastUpdated = timestamp;\n    }\n  }\n\n  draw(ctx){\n    const sprite = this.getSprite();\n    ctx.drawImage(\n      this.spritesheet,\n      sprite[0],\n      sprite[1],\n      sprite[2],\n      sprite[3],\n      this.position.x,\n      this.position.y,\n      this.width,\n      this.height\n    )\n  }\n}"],"sourceRoot":""}