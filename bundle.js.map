{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/board.js","webpack:///./src/dose.js","webpack:///./src/drmario.js","webpack:///./src/game.js","webpack:///./src/input.js","webpack:///./src/mario.js","webpack:///./src/pill.js","webpack:///./src/virus.js"],"names":["COLORS","Board","game","width","height","margin","squareWidth","squareHeight","level","numberViruses","grid","createEmptyGrid","viruses","Array","map","row","fill","total","added","rowAdjustment","Math","floor","lowestRow","rowRange","random","column","color","newVirus","Virus","coordinates","push","coords","bottleSide","bottleTop","yCoord","xCoord","xPos","yPos","x","y","pill","rotation","orientation","c0","c1","leftCoord","rightCoord","Dose","otherHalf","topCoord","bottomCoord","sqNumber","squares","currRow","sameColor","currSquare","currColor","currCol","coord","array","some","ele","fours","col","isEmpty","downResult","checkFourDown","acrossResult","checkFourAcross","concat","length","result","forEach","coordInArray","coordArray","that","item","otherHalfCoord","doseRow","doseCol","dose","deleteFromGame","single","addToGame","Promise","resolve","reject","canFall","currItem","applied","applyGravity","window","setTimeout","then","toClear","findFours","deleteFromBoard","DOSE_SPRITES","red","yellow","blue","empty","options","spritesheet","position","board","getPosition","singleDoses","gameObjects","singleDoseIndex","indexOf","gameObjectsIndex","splice","console","log","nextRow","canDrop","timestamp","ctx","sprite","getSprite","drawImage","GAME_WIDTH","GAME_HEIGHT","MARGIN","SQR_WIDTH","SQR_HEIGHT","BOTTLE","printName","input","name","timing","i","innerText","slice","getLevel","num","document","addEventListener","jsLogo","getElementById","createdBy","myName","menuSidebar","style","opacity","levelSlide","levelOutput","innerHTML","value","oninput","speedSlide","speedOutput","parseInt","canvas","getContext","marioCanvas","marioCtx","clearRect","miscellaneous","gameOptions","startButton","stageLevel","stageSpeed","Game","mario","Mario","classList","add","start","gameLoop","update","draw","requestAnimationFrame","gameWidth","gameHeight","speed","paused","score","populateViruses","fallenPills","currentPill","generatePill","nextPill","levelDisplay","virusDisplay","scoreDisplay","stageInfo","toggle","pauseButton","currentHandler","InputHandler","newPill","Pill","colors","modalId","modal","remove","object","handleInput","bind","event","keyCode","preventDefault","moveLeft","moveRight","speedDrop","flipLeft","flipRight","removeEventListener","MARIO_SPRITES","armUp","armMid","armDown","stance","offset","getXOffset","drawNextPill","COLOR_SPRITES","top","bottom","left","right","totalWidth","totalHeight","getOrientation","lastDrop","dropSpeed","stationary","connected","prevRow","prevCol","nextCol","canMoveLeft","canMoveRight","canFlip","newRotation","adjustFlip","freeze","recordPill","drop","removeListener","clearFours","wonGame","newStage","newGame","boardFull","loadNextPill","lostGame","fallenPillsIndex","sprites","getSprites","drawHorizontal","drawVertical","dropInterval","VIRUS_SPRITES","none","frame","lastUpdated","frameLength","gameVirusesIndex"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/drmario.js\");\n","import Virus from './virus';\nimport Dose from './dose';\n\nconst COLORS = [\"red\", \"yellow\", \"blue\"];\n\nexport default class Board {\n  constructor(game) {\n    this.width = 8;\n    this.height = 16;\n    this.game = game;\n    this.margin = game.margin;\n    this.squareWidth = game.squareWidth;\n    this.squareHeight = game.squareHeight;\n    this.level = game.level;  // we'll do levels 0 through 10\n    this.numberViruses = 4 * (this.level + 1);\n\n    this.grid = this.createEmptyGrid();\n    this.viruses = [];  // this will only be updated once; game keeps track of viruses\n  }\n\n  // methods for populating board at beginning of game\n\n  createEmptyGrid() {\n    const grid = [...Array(this.height)]\n      .map(row => Array(this.width).fill(null));\n\n    return grid;\n  }\n\n  populateViruses() {\n    let total = this.numberViruses;\n    let added = 0;\n\n    // only want to add viruses to uppermost rows if the level is very high\n    let rowAdjustment = 4 - Math.floor(this.level / 5);\n\n    let lowestRow = 3 + rowAdjustment;\n    let rowRange = 16 - lowestRow;\n\n    while (added < total) {\n      let row = Math.floor(Math.random() * rowRange) + lowestRow;\n      let column = Math.floor(Math.random() * this.width);\n      let color = COLORS[Math.floor(Math.random() * 3)];\n\n      if (this.grid[row][column] === null) {\n        let newVirus = new Virus({\n          game: this.game,\n          color: color,\n          coordinates: [row, column]\n        });\n\n        this.grid[row][column] = newVirus;\n        this.viruses.push(newVirus);\n        added += 1;\n      }\n    }\n\n    return this.viruses;\n  }\n\n  // methods for determining position, finding empty postns, saving pill to board\n\n  getPosition(coords) {\n    let margin = this.margin;\n    let bottleSide = 24;\n    let bottleTop = 115;\n    let [yCoord, xCoord] = coords;\n\n    let xPos = margin + bottleSide + (xCoord * (this.squareWidth + margin));\n    let yPos = margin + bottleTop + (yCoord * (this.squareHeight + margin));\n\n    return { x: xPos, y: yPos };\n  }\n\n  isEmpty(coords) {   // coords is an array in form of [row, column]\n    let [row, column] = coords;\n\n    if (column < 0 || column > 7) return false;   // outside of board\n    if (row < 0 || row > 15) return false;        // outside of board\n\n    if (this.grid[row][column] === null) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  boardFull() {\n    if (this.grid[0][3] || this.grid[0][4]) return true;\n    return false;\n  }\n\n  recordPill(pill) {\n    let [row, column] = pill.coordinates;\n    let rotation = pill.rotation;\n    let orientation = pill.orientation;\n\n    let c0 = pill.c0;\n    let c1 = pill.c1;\n\n    if (orientation === \"horizontal\") {\n      let leftCoord = [row, column];\n      let rightCoord = [row, column + 1];\n\n      if (rotation === 0) {\n        this.grid[row][column] = new Dose({\n          color: c0,\n          coordinates: leftCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: rightCoord\n        });\n        this.grid[row][column + 1] = new Dose({\n          color: c1,\n          coordinates: rightCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: leftCoord\n        });\n\n      } else if (rotation === 180) {\n        this.grid[row][column] = new Dose({\n          color: c1,\n          coordinates: leftCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: rightCoord\n        });\n        this.grid[row][column + 1] = new Dose({\n          color: c0,\n          coordinates: rightCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: leftCoord\n        });\n      }\n    } else if (orientation === \"vertical\") {\n      let topCoord = [row - 1, column];\n      let bottomCoord = [row, column];\n\n      if (rotation === 90) {\n        this.grid[row -1][column] = new Dose({\n          color: c0,\n          coordinates: topCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: bottomCoord\n        });\n        this.grid[row][column] = new Dose({\n          color: c1,\n          coordinates: bottomCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: topCoord\n        });\n\n      } else if (rotation === 270) {\n        this.grid[row - 1][column] = new Dose({\n          color: c1,\n          coordinates: topCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: bottomCoord\n        });\n        this.grid[row][column] = new Dose({\n          color: c0,\n          coordinates: bottomCoord,\n          game: this.game,\n          pill: pill,\n          otherHalf: topCoord\n        });\n      }\n    }\n  }\n\n  // methods for detecting 4+ of one color in a row (vert. or horiz.)\n\n  checkFourDown(coords) {\n    let [row, column] = coords;\n\n    let sqNumber = 1;\n    let squares = [coords];\n    let color = this.grid[row][column].color;\n\n    let currRow = row;\n    let sameColor = true;\n\n    while (sameColor && currRow <= 14) {\n      currRow += 1;\n      let currSquare = this.grid[currRow][column];\n\n      if (currSquare) {\n        let currColor = this.grid[currRow][column].color;\n  \n        if (currColor === color) {\n          sqNumber += 1;\n          squares.push([currRow, column]);\n        } else {\n          sameColor = false;\n        }\n      } else {\n        sameColor = false;\n      }\n    }\n\n    if (sqNumber >= 4) {\n      return squares;\n    } else {\n      return false;\n    }\n\n  }\n\n  checkFourAcross(coords) {\n    let [row, column] = coords;\n\n    let sqNumber = 1;\n    let squares = [coords];\n    let color = this.grid[row][column].color;\n\n    let currCol = column;\n    let sameColor = true;\n\n    while (sameColor && currCol <= 6) {\n      currCol += 1;\n      let currSquare = this.grid[row][currCol];\n\n      if (currSquare) {\n        let currColor = this.grid[row][currCol].color;\n\n        if (currColor === color) {\n          sqNumber += 1;\n          squares.push([row, currCol]);\n        } else {\n          sameColor = false;\n        }\n      } else {\n        sameColor = false;\n      }\n    }\n\n    if (sqNumber >= 4) {\n      return squares;\n    } else {\n      return false;\n    }\n  }\n\n  coordInArray(coord, array) {\n    return array.some(ele => ele[0] === coord[0] && ele[1] === coord[1]);\n  }\n\n  findFours() {\n    let fours = [];\n    \n    for (let row = 0; row <= 15; row++) {\n      for (let col = 0; col <= 7; col++) {\n        let coords = [row, col];\n\n        if (!this.isEmpty(coords)) {\n          let downResult = this.checkFourDown(coords);\n          let acrossResult = this.checkFourAcross(coords);\n\n          if (downResult) {\n            fours = fours.concat(downResult);\n          }\n          if (acrossResult) {\n            fours = fours.concat(acrossResult);\n          }\n        }\n      }   \n    }\n\n    if (fours.length === 0) return null;\n\n    let result = [];   // need to eliminate duplicate coordinates from result\n\n    fours.forEach(coord => {\n      if (!this.coordInArray(coord, result)) {\n        result.push(coord);\n      }\n    });\n\n    return result;\n  }\n\n  deleteFromBoard(coordArray) {\n    let that = this;\n\n    coordArray.forEach(coord => {\n      let [row, column] = coord;\n      let item = that.grid[row][column];\n\n      if (item instanceof Dose && item.pill) {\n          let pill = item.pill;\n          let otherHalfCoord = item.otherHalf;\n\n          let [doseRow, doseCol] = otherHalfCoord;\n          let dose = that.grid[doseRow][doseCol];\n\n          // delete pill\n          pill.deleteFromGame();\n          dose.pill = null;\n          dose.otherHalf = null;\n\n          // add dose to game to display\n          dose.single = true;\n          dose.addToGame();\n      } else {\n        item.deleteFromGame();\n      }\n\n      that.grid[row][column] = null;\n    });\n\n  }\n\n  applyGravity() {\n    return new Promise((resolve, reject) => {\n      // console.log('apply gravity method');\n      var canFall = false;\n  \n      for (let row = 14; row >= 0; row--) {\n        for (let col = 0; col <= 7; col++) {\n          let currItem = this.grid[row][col];\n          var applied;\n  \n          if (currItem instanceof Dose && currItem.pill) {\n            let pill = currItem.pill;\n            applied = pill.applyGravity();\n            if (applied) canFall = true;\n          } else if (currItem instanceof Dose && currItem.single) {\n            applied = currItem.applyGravity();\n            if (applied) canFall = true;\n          }\n        }\n      }\n  \n      if (canFall) {\n        window.setTimeout(() => {\n          this.applyGravity().then(() => {\n            resolve(true);\n          })\n        }, 250);\n      } else {\n        window.setTimeout(() => {\n          resolve(true);\n        }, 100);\n      }\n\n    })\n\n      // return;\n    // }\n\n  }\n\n  clearFours() {\n    let toClear = this.findFours();\n\n    if (toClear) {\n      this.deleteFromBoard(toClear);\n      // console.log('cleared!');\n    } else {\n      // console.log('nothing to clear!');\n    }\n  }\n\n\n\n}","const DOSE_SPRITES = {\n  single: {\n    red: [0, 40, 7, 7],\n    yellow: [8, 40, 7, 7],\n    blue: [16, 40, 7, 7]\n  },\n\n  empty: {\n    red: [0, 48, 7, 7],\n    yellow: [8, 48, 7, 7],\n    blue: [16, 48, 7, 7]\n  }\n}\n\nexport default class Dose {\n  constructor(options) {\n    this.color = options.color;\n    this.coordinates = options.coordinates;\n    this.pill = options.pill || null;\n    this.otherHalf = options.otherHalf || null;\n    this.single = options.single || false;\n\n    this.game = options.game;\n    this.spritesheet = this.game.spritesheet;\n\n    this.position = this.game.board.getPosition(this.coordinates);\n    this.width = options.game.squareWidth;\n    this.height = options.game.squareHeight;\n  }\n\n  addToGame() {\n    this.game.singleDoses.push(this);\n    this.game.gameObjects.push(this);\n  }\n\n  deleteFromGame() {\n    let singleDoseIndex = this.game.singleDoses.indexOf(this);\n    let gameObjectsIndex = this.game.gameObjects.indexOf(this);\n\n    this.game.singleDoses.splice(singleDoseIndex, 1);\n    this.game.gameObjects.splice(gameObjectsIndex, 1);\n\n    // console.log(singleDoseIndex);\n    // console.log(gameObjectsIndex);\n  }\n  \n  canDrop() {\n    if (!this.single) {\n      console.log('this method is not for pills!!!!');\n      return null;\n    }\n\n    let [currRow, currCol] = this.coordinates;\n    let nextRow = currRow + 1;\n\n    if (this.game.board.isEmpty([nextRow, currCol])) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  \n  applyGravity() {\n    if (!this.single) {\n      console.log('this method is not for pills!!!!');\n      return null;\n    }\n    \n    if (this.canDrop()) {\n      let [currRow, currCol] = this.coordinates;\n      let nextRow = currRow + 1;\n\n      this.coordinates[0] += 1;\n      this.position = this.game.board.getPosition(this.coordinates);\n\n      this.game.board.grid[currRow][currCol] = null;\n      this.game.board.grid[nextRow][currCol] = this;\n\n      return true;\n    }\n    return false;\n  }\n\n  // display for single doses only\n\n  getSprite() {\n    let color = this.color;\n    return DOSE_SPRITES.single[color];\n  }\n\n  update(timestamp) {\n\n  }\n\n  draw(ctx) {\n    const sprite = this.getSprite();\n    ctx.drawImage(\n      this.spritesheet,\n      sprite[0],\n      sprite[1],\n      sprite[2],\n      sprite[3],\n      this.position.x,\n      this.position.y,\n      this.width,\n      this.height\n    )\n  }\n}","import Game from './game';\nimport Mario from './mario';\n\nconst GAME_WIDTH = 250;\nconst GAME_HEIGHT = 492;\nconst MARGIN = 3;\n\nconst SQR_WIDTH = 25 - MARGIN;\nconst SQR_HEIGHT = 22 - MARGIN;\n\nconst BOTTLE = [153, 290, 78, 174];\n\nconst printName = function(input) {\n  const name = \"KEVIN MOCH\";\n  const timing = 100;\n  setTimeout(function() {\n    for (let i = 1; i <= name.length; i++) {\n      (function(i) {\n        setTimeout(function() {\n          input.innerText = name.slice(0, i)\n        }, timing * i)\n      })(i);\n    }\n  }, 1000);\n}\n\nconst getLevel = function(num) {\n  switch (num) {\n    case 1:\n      return \"Slow\";\n    case 2:\n      return \"Medium\";\n    case 3:\n      return \"Fast\";\n  }\n}\n\n/*\nconst startGameLoop = function(levelSlide, speedSlide, gameWidth, gameHeight,\n  margin, sqrWidth, sqrHeight, gameSpritesheet, marioSpritesheet, bottle, ctx, \n  marioCtx) {\n    let stageLevel = parseInt(levelSlide.value);\n    let stageSpeed = parseInt(speedSlide.value);\n  \n    let game = new Game(\n      gameWidth,\n      gameHeight,\n      margin,\n      sqrWidth,\n      sqrHeight,\n      gameSpritesheet,\n      stageLevel,\n      stageSpeed\n    );\n  \n    let mario = new Mario({\n      spritesheet: marioSpritesheet,\n      game: game\n    });\n\n    let gameOptions = document.getElementById('to-mute');\n    let startButton = document.getElementById('start-button');\n  \n    gameOptions.classList.add('muted');\n    startButton.innerText = \"RESTART\";\n  \n    const ctx2 = ctx;\n    const marioCtx2 = marioCtx;\n\n    game.start();\n  \n    function gameLoop(timestamp) {\n      ctx2.clearRect(0, 0, gameWidth, gameHeight);\n      ctx2.drawImage(marioSpritesheet,\n        bottle[0], bottle[1], bottle[2], bottle[3],\n        0, 0, gameWidth, gameHeight);\n  \n      game.update(timestamp);\n      game.draw(ctx2);\n      mario.draw(marioCtx2);\n  \n      requestAnimationFrame(gameLoop);\n    }\n  \n  requestAnimationFrame(gameLoop);\n}\n*/\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  // fade in elements while waiting for font to load\n  const jsLogo = document.getElementById(\"logo-js\");\n  const createdBy = document.getElementById('created-by');\n  const myName = document.getElementById('kevin-moch');\n  const menuSidebar = document.getElementById('menu-sidebar');\n\n  window.setTimeout(()=> {\n    jsLogo.style.color = \"black\";\n    createdBy.style.opacity = 1;\n    printName(myName);\n    window.setTimeout(() => {\n      menuSidebar.style.opacity = 1;\n    }, 1000);\n  }, 100);\n\n  // listener to adjust the displayed level\n  const levelSlide = document.getElementById(\"level-slide\");\n  const levelOutput = document.getElementById(\"curr-level\");\n  levelOutput.innerHTML = levelSlide.value;\n\n  levelSlide.oninput = function () {\n    levelOutput.innerHTML = this.value;\n  };\n\n  // listener to adjust the displayed speed\n  const speedSlide = document.getElementById(\"speed-slide\");\n  const speedOutput = document.getElementById(\"curr-speed\");\n  speedOutput.innerHTML = getLevel(parseInt(speedSlide.value));\n\n  speedSlide.oninput = function () {\n    speedOutput.innerHTML = getLevel(parseInt(this.value));\n  }\n\n  // grabbing canvases and canvas contexts\n  const canvas = document.getElementById(\"gameScreen\");\n  const ctx = canvas.getContext(\"2d\");\n\n  const marioCanvas = document.getElementById(\"dr-mario-canvas\");\n  const marioCtx = marioCanvas.getContext('2d');\n\n  ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);\n\n  // grabbing spritesheets\n  let miscellaneous = document.getElementById(\"miscellaneous\");\n  let spritesheet = document.getElementById(\"spritesheet\");\n\n  spritesheet.addEventListener(\"load\", () => {\n\n    ctx.drawImage(miscellaneous,\n      BOTTLE[0], BOTTLE[1], BOTTLE[2], BOTTLE[3],\n      0, 0, GAME_WIDTH, GAME_HEIGHT);\n\n    let gameOptions = document.getElementById('to-mute');\n    let startButton = document.getElementById('start-button');\n\n    // event listener on start button to start game;\n\n    // startGameLoop(levelSlide, speedSlide, GAME_WIDTH, GAME_HEIGHT, MARGIN,\n    //   SQR_WIDTH, SQR_HEIGHT, spritesheet, miscellaneous, BOTTLE, gameOptions,\n    //   startButton, ctx, marioCtx);\n\n    // startButton.addEventListener('click', startGameLoop.bind(null, event, \n    //   levelSlide, speedSlide, GAME_WIDTH, GAME_HEIGHT, MARGIN, SQR_WIDTH, \n    //   SQR_HEIGHT, spritesheet, miscellaneous, BOTTLE, ctx, marioCtx));\n\n    \n    startButton.addEventListener('click', () => {\n      let stageLevel = parseInt(levelSlide.value);\n      let stageSpeed = parseInt(speedSlide.value);\n\n      let game = new Game(\n        GAME_WIDTH, \n        GAME_HEIGHT,\n        MARGIN, \n        SQR_WIDTH, \n        SQR_HEIGHT, \n        spritesheet,\n        stageLevel,\n        stageSpeed\n      );\n  \n      let mario = new Mario({\n        spritesheet: miscellaneous,\n        game: game\n      });\n\n      gameOptions.classList.add('muted');\n      startButton.innerText = \"RESTART\";\n  \n      game.start();\n\n      function gameLoop(timestamp) {\n        ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);\n        ctx.drawImage(miscellaneous, \n          BOTTLE[0], BOTTLE[1], BOTTLE[2], BOTTLE[3], \n          0, 0, GAME_WIDTH, GAME_HEIGHT);\n  \n        game.update(timestamp);\n        game.draw(ctx);\n        mario.draw(marioCtx);\n  \n        requestAnimationFrame(gameLoop);\n      }\n      \n      requestAnimationFrame(gameLoop);\n    });\n    \n  });\n});","import InputHandler from './input';\nimport Board from './board';\nimport Pill from './pill';\n\nconst COLORS = [\"red\", \"yellow\", \"blue\"];\n\nexport default class Game {\n\n  constructor(gameWidth, gameHeight, margin, squareWidth, squareHeight, \n      spritesheet, level, speed) {\n    this.gameWidth = gameWidth;\n    this.gameHeight = gameHeight;\n    this.margin = margin;\n    this.squareWidth = squareWidth;\n    this.squareHeight = squareHeight;\n    this.spritesheet = spritesheet;\n    this.level = level ? level : 0;\n    this.speed = speed ? speed : 1;\n    this.paused = false;\n    this.score = 0;\n\n    this.board = new Board(this);\n    this.viruses = this.board.populateViruses();\n    // console.log(this.board);\n\n    this.fallenPills = [];\n    this.singleDoses = [];\n\n    this.currentPill = this.generatePill();\n    this.nextPill = this.generatePill();\n  }\n\n  start() {\n    let levelDisplay = document.getElementById('stage-level-display');\n    levelDisplay.innerText = this.level;\n\n    this.virusDisplay = document.getElementById('stage-viruses-display');\n    this.virusDisplay.innerText = this.viruses.length;\n\n    let scoreDisplay = document.getElementById('stage-score-display');\n    scoreDisplay.innerText = this.score;\n\n    let stageInfo = document.getElementById('stage-info');\n    stageInfo.classList.toggle('hidden');\n\n    let pauseButton = document.getElementById('pause-button');\n    pauseButton.addEventListener('click', () => {\n      this.paused = !this.paused;\n    });\n\n    this.gameObjects = [\n      ...this.viruses,\n      ...this.fallenPills,\n      ...this.singleDoses,\n      this.currentPill\n    ];\n\n    this.currentHandler = new InputHandler(this.currentPill);\n  }\n\n  generatePill() {\n    let c0 = COLORS[Math.floor(Math.random() * 3)];\n    let c1 = COLORS[Math.floor(Math.random() * 3)];\n\n    let newPill = new Pill({\n      colors: [c0, c1],\n      game: this\n    });\n\n    return newPill;\n  }\n\n  loadNextPill() {\n    const that = this;\n\n    window.setTimeout(function(){\n      that.currentPill = that.nextPill;\n      that.gameObjects.push(that.currentPill);\n      that.currentHandler = new InputHandler(that.currentPill);\n\n      that.nextPill = that.generatePill();\n    }, 100);\n  }\n\n  newGame(modalId) {\n    let modal = document.getElementById(modalId);\n    let gameOptions = document.getElementById('to-mute');\n    let startButton = document.getElementById('start-button');\n    \n    modal.classList.add('hidden');\n    gameOptions.classList.remove('muted');\n    startButton.innerText = \"START\";\n  }\n\n  update(timestamp) {\n    this.virusDisplay.innerText = this.viruses.length;\n    if (this.paused) return;\n    this.gameObjects.forEach(object => object.update(timestamp));\n    // this.virusDisplay.innerText = this.viruses.length;\n  }\n\n  draw(ctx) {\n    this.gameObjects.forEach(object => object.draw(ctx));\n  }\n}","export default class InputHandler {\n  constructor(pill) {\n    \n    this.pill = pill;\n    this.handleInput = this.handleInput.bind(this);\n\n    document.addEventListener(\"keydown\", this.handleInput);\n\n    /*\n    document.addEventListener(\"keydown\", (event) => {\n      switch (event.keyCode) {\n        case 74:\n          pill.moveLeft();\n          break;\n        case 76:\n          pill.moveRight();\n          break;\n        case 75:\n          pill.speedDrop();\n          break;\n        case 83:\n          pill.flipLeft();\n          break;\n        case 70:\n          pill.flipRight();\n          break;\n      }\n    });\n    */\n  }\n\n  handleInput(event) {\n    switch (event.keyCode) {\n      case 74:\n        event.preventDefault();\n        this.pill.moveLeft();\n        break;\n      case 37:\n        event.preventDefault();\n        this.pill.moveLeft();\n        break;\n      case 76:\n        event.preventDefault();\n        this.pill.moveRight();\n        break;\n      case 39:\n        event.preventDefault();\n        this.pill.moveRight();\n        break;\n      case 75:\n        event.preventDefault();\n        this.pill.speedDrop();\n        break;\n      case 40:\n        event.preventDefault();\n        this.pill.speedDrop();\n        break;\n      case 83:\n        event.preventDefault();\n        this.pill.flipLeft();\n        break;\n      case 70:\n        event.preventDefault();\n        this.pill.flipRight();\n        break;\n      case 32:\n        event.preventDefault();\n        let game = this.pill.game;\n        game.paused = !game.paused;\n    }\n  }\n\n  removeListener() {\n    document.removeEventListener(\"keydown\", this.handleInput);\n  }\n}","const MARIO_SPRITES = {\n  armUp: [0, 201, 23, 39],\n  armMid: [25, 201, 30, 39],\n  armDown: [65, 201, 22, 39]\n}\n\nexport default class Mario {\n  constructor(options) {\n    this.spritesheet = options.spritesheet\n    this.stance = \"armUp\";\n    this.game = options.game;\n  }\n\n  getSprite() {\n    return MARIO_SPRITES[this.stance];\n  }\n\n  getXOffset() {\n    switch (this.stance) {\n      case \"armMid\":\n        return 0;\n      case \"armUp\":\n        return 7;\n      case \"armDown\":\n        return 8;\n    }\n  }\n\n  draw(ctx) {\n    let sprite = this.getSprite();\n    let offset = this.getXOffset() * 3;\n    let nextPill = this.game.nextPill;\n    ctx.drawImage(\n      spritesheet,\n      sprite[0],\n      sprite[1],\n      sprite[2],\n      sprite[3],\n      30 + offset,\n      15,\n      90 - offset,\n      116\n    );\n    nextPill.drawNextPill(ctx);\n  }\n}","/* game_width = 202 (8sq.);   game_height = 354 (16sq.); */\n/* sq_width = 23px (25);      sq_height = 20px (22); */\n\nconst COLOR_SPRITES = {\n  top: {\n    red: [0, 8, 7, 7],\n    yellow: [8, 8, 7, 7],\n    blue: [16, 8, 7, 7]\n  },\n\n  bottom: {\n    red: [0, 16, 7, 7],\n    yellow: [8, 16, 7, 7],\n    blue: [16, 16, 7, 7]\n  },\n\n  left: {\n    red: [0, 24, 7, 7],\n    yellow: [8, 24, 7, 7],\n    blue: [16, 24, 7, 7]\n  },\n\n  right: {\n    red: [0, 32, 7, 7],\n    yellow: [8, 32, 7, 7],\n    blue: [16, 32, 7, 7]\n  },\n\n  single: {\n    red: [0, 40, 7, 7],\n    yellow: [8, 40, 7, 7],\n    blue: [16, 40, 7, 7]\n  },\n\n  empty: {\n    red: [0, 48, 7, 7],\n    yellow: [8, 48, 7, 7],\n    blue: [16, 48, 7, 7]\n  }\n}\n\nexport default class Pill {\n  constructor(options) {\n    this.gameWidth = options.game.gameWidth;\n    this.gameHeight = options.game.gameHeight;\n    this.width = options.game.squareWidth;\n    this.height = options.game.squareHeight;\n    this.margin = options.game.margin;\n    this.totalWidth = this.width + this.margin;\n    this.totalHeight = this.height + this.margin;\n    this.spritesheet = options.game.spritesheet;\n    this.board = options.game.board;\n    this.game = options.game;\n\n    this.c0 = options.colors[0];\n    this.c1 = options.colors[1];\n\n    this.coordinates = [0, 3];  // coordinates[0]= y/row, coordinates[1]= x/col\n    this.position = this.board.getPosition(this.coordinates);\n\n    this.rotation = 0;\n    this.orientation = this.getOrientation();\n    this.lastDrop = null;\n    this.dropSpeed = options.game.speed;\n\n    this.stationary = false;\n    this.connected = true;\n  }\n\n  // methods involved in changing pill's instance variables/own state\n\n  getOrientation() {\n    switch (this.rotation) {\n      case 0:\n        return \"horizontal\";\n      case 90:\n        return \"vertical\";\n      case 180:\n        return \"horizontal\";\n      case 270:\n        return \"vertical\";\n    }\n  }\n\n  canMoveLeft() {\n    let [currRow, currCol] = this.coordinates;\n    let prevRow = currRow - 1;\n    let prevCol = currCol - 1;\n\n    if (this.orientation === \"horizontal\") {\n      if (this.board.isEmpty([currRow, prevCol])) {\n        return true;\n      } else {\n        return false;\n      }\n    } else if (this.orientation === \"vertical\") {\n      if (this.board.isEmpty([currRow, prevCol]) && \n        this.board.isEmpty([prevRow, prevCol])) {\n          return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  canMoveRight() {\n    let [currRow, currCol] = this.coordinates;\n    let prevRow = currRow - 1;\n    let nextCol = currCol + 1;\n\n    if (this.orientation === \"horizontal\") {\n      if (this.board.isEmpty([currRow, nextCol]) &&\n        this.board.isEmpty([currRow, nextCol + 1])) {\n          return true;\n      } else {\n        return false;\n      }\n    } else if (this.orientation === \"vertical\") {\n      if (this.board.isEmpty([currRow, nextCol]) &&\n        this.board.isEmpty([prevRow, nextCol])) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  moveLeft() {\n    if (this.game.paused) return;\n\n    if (!this.stationary && this.canMoveLeft()) {\n      this.coordinates[1] -= 1;\n      this.position = this.board.getPosition(this.coordinates);\n    }\n  }\n\n  moveRight() {\n    if (this.game.paused) return;\n\n    if (!this.stationary && this.canMoveRight()) {\n      if ((this.orientation === \"horizontal\" && this.coordinates[1] < 6) ||\n        (this.orientation === \"vertical\" && this.coordinates[1] < 7)) {\n        this.coordinates[1] += 1;\n        this.position = this.board.getPosition(this.coordinates);\n      }\n    }\n  }\n\n  canFlip() {\n    let [currRow, currCol] = this.coordinates;\n    let prevRow = currRow - 1;\n    let prevCol = currCol - 1;\n    let nextRow = currRow + 1;\n    let nextCol = currCol + 1;\n\n    if (this.orientation === \"horizontal\") {\n      if (!this.board.isEmpty([prevRow, currCol]) &&\n        !this.board.isEmpty([prevRow, nextCol]) &&\n        !this.board.isEmpty([nextRow, currCol]) &&\n        !this.board.isEmpty([nextRow, nextCol])) {\n          return false;\n        } else {\n          return true;\n        }\n    } else if (this.orientation === \"vertical\") {\n      if (!this.board.isEmpty([prevRow, prevCol]) &&\n        !this.board.isEmpty([currRow, prevCol]) &&\n        !this.board.isEmpty([prevRow, nextCol]) &&\n        !this.board.isEmpty([currRow, nextCol])) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  }\n\n  adjustFlip() {\n    let [currRow, currCol] = this.coordinates;\n    let prevRow = currRow - 1;\n    let prevCol = currCol - 1;\n    let nextRow = currRow + 1;\n    let nextCol = currCol + 1;\n\n    if (this.orientation === \"vertical\") {\n      if (!this.board.isEmpty([prevRow, currCol])) {\n        if (!this.board.isEmpty([nextRow, currCol])) {\n          if (!this.board.isEmpty([prevRow, nextCol])) {\n            this.coordinates = [nextRow, nextCol];\n            this.position = this.board.getPosition(this.coordinates);\n          } else {\n            this.coordinates = [currRow, nextCol];\n            this.position = this.board.getPosition(this.coordinates);\n          }\n        } else {\n          this.coordinates = [nextRow, currCol];\n          this.position = this.board.getPosition(this.coordinates);\n        }\n      } \n    } else if (this.orientation === \"horizontal\") {\n      if (!this.board.isEmpty([currRow, nextCol])) {\n        if (!this.board.isEmpty([currRow, prevCol])) {\n          if (!this.board.isEmpty([prevRow, nextCol])) {\n            this.coordinates = [prevRow, prevCol];\n            this.position = this.board.getPosition(this.coordinates);\n          } else {\n            this.coordinates = [prevRow, currCol];\n            this.position = this.board.getPosition(this.coordinates);\n          }\n        } else {\n          this.coordinates = [currRow, prevCol];\n          this.position = this.board.getPosition(this.coordinates);\n        }\n      } \n    }\n  }\n\n  flipLeft() {\n    if (this.game.paused) return;\n\n    if (!this.stationary && this.canFlip()) {\n      let newRotation = this.rotation - 90;\n      this.rotation = (newRotation >= 0) ? \n        newRotation : \n        (((this.rotation - 90) % 360) + 360) % 360; // funkiness of % with negs\n      this.orientation = this.getOrientation();\n\n      this.adjustFlip();\n    }\n  }\n\n  flipRight() {\n    if (this.game.paused) return;\n\n    if (!this.stationary && this.canFlip()) {\n      this.rotation = (this.rotation + 90) % 360;\n      this.orientation = this.getOrientation();\n\n      this.adjustFlip();\n    }\n  }\n\n  canDrop() {\n    let [currRow, currCol] = this.coordinates;\n    let nextRow = currRow + 1;\n    let nextCol = currCol + 1;\n\n    if (this.orientation === \"horizontal\") {\n      if (this.board.isEmpty([nextRow, currCol]) && \n        this.board.isEmpty([nextRow, nextCol])) {\n          return true;\n        } else {\n          return false;\n        }\n    } else if (this.orientation === \"vertical\") {\n      if (this.board.isEmpty([nextRow, currCol])) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  drop() {\n    if (this.canDrop()) {\n      this.coordinates[0] += 1;\n      this.position = this.board.getPosition(this.coordinates);\n    } else {\n      this.freeze();\n    }\n  }\n\n  applyGravity() {\n    // console.log('apply gravity method');\n\n    if (this.canDrop()) {\n      let [currRow, currCol] = this.coordinates;\n      let prevRow = currRow - 1;\n      // let nextRow = currRow + 1;\n      let nextCol = currCol + 1;\n\n      this.coordinates[0] += 1;\n      this.position = this.board.getPosition(this.coordinates);\n\n      if (this.orientation === \"horizontal\") {\n        this.board.grid[currRow][currCol] = null;\n        this.board.grid[currRow][nextCol] = null;\n      } else if (this.orientation === \"vertical\") {\n        this.board.grid[prevRow][currCol] = null;\n        this.board.grid[currRow][currCol] = null;\n      }\n\n      this.board.recordPill(this);\n      return true;\n    }\n    return false;\n  }\n\n  speedDrop() {\n    if (this.game.paused) return;\n    this.drop();\n    // this.lastDrop = new Date().getTime();\n  }\n\n  freeze() {\n    this.stationary = true;\n    this.game.fallenPills.push(this);\n    this.game.currentHandler.removeListener();\n\n    this.board.recordPill(this);\n    this.board.clearFours();\n\n    // console.log(this.board.applyGravity());\n\n    this.board.applyGravity()\n      .then(() => {\n        this.board.clearFours();\n        return this.board.applyGravity()\n      }).then(() => {\n        this.board.clearFours();\n        return this.board.applyGravity()\n      }).then(() => {\n        if (this.game.viruses.length === 0) {\n          let wonGame = document.getElementById('won-game');\n          wonGame.classList.remove('hidden');\n\n          let newStage = document.getElementById('new-stage');\n          newStage.addEventListener('click', () => {\n            this.game.newGame('won-game');\n          })\n\n        } else if (!this.board.boardFull()) {\n          this.game.loadNextPill();\n        } else {\n          let lostGame = document.getElementById('lost-game');\n          lostGame.classList.remove('hidden');\n\n          let newGame = document.getElementById('new-game');\n          newGame.addEventListener('click', () => {\n            this.game.newGame('lost-game');\n          })\n        }\n      })\n  }\n\n  deleteFromGame() {\n    let fallenPillsIndex = this.game.fallenPills.indexOf(this);\n    let gameObjectsIndex = this.game.gameObjects.indexOf(this);\n\n    this.game.fallenPills.splice(fallenPillsIndex, 1);\n    this.game.gameObjects.splice(gameObjectsIndex, 1);\n\n    // console.log(fallenPillsIndex);\n    // console.log(gameObjectsIndex);\n  }\n\n  // methods involved in displaying/drawing the pills\n\n  getSprites() {\n    let left, right, top, bottom;\n    let c0 = this.c0;\n    let c1 = this.c1;\n\n    if (this.rotation === 0) {\n      left = COLOR_SPRITES.left[c0];\n      right = COLOR_SPRITES.right[c1];\n      return { left: left, right: right };\n    } else if (this.rotation === 180) {\n      left = COLOR_SPRITES.left[c1];\n      right = COLOR_SPRITES.right[c0];\n      return { left: left, right: right };\n    } else if (this.rotation === 90) {\n      top = COLOR_SPRITES.top[c0];\n      bottom = COLOR_SPRITES.bottom[c1];\n      return { top: top, bottom: bottom };\n    } else if (this.rotation === 270) {\n      top = COLOR_SPRITES.top[c1];\n      bottom = COLOR_SPRITES.bottom[c0];\n      return { top: top, bottom: bottom};\n    }\n  }\n\n  drawHorizontal(ctx) {\n    let sprites = this.getSprites();\n    ctx.drawImage(\n      spritesheet,\n      sprites.left[0],\n      sprites.left[1],\n      sprites.left[2],\n      sprites.left[3],\n      this.position.x,\n      this.position.y,\n      this.width,\n      this.height\n    );\n    ctx.drawImage(\n      spritesheet,\n      sprites.right[0],\n      sprites.right[1],\n      sprites.right[2],\n      sprites.right[3],\n      this.position.x + 25,\n      this.position.y,\n      this.width,\n      this.height\n    );\n  }\n\n  drawVertical(ctx) {\n    let sprites = this.getSprites();\n    ctx.drawImage(\n      spritesheet,\n      sprites.top[0],\n      sprites.top[1],\n      sprites.top[2],\n      sprites.top[3],\n      this.position.x,\n      this.position.y - 22,\n      this.width,\n      this.height\n    );\n    ctx.drawImage(\n      spritesheet,\n      sprites.bottom[0],\n      sprites.bottom[1],\n      sprites.bottom[2],\n      sprites.bottom[3],\n      this.position.x,\n      this.position.y,\n      this.width,\n      this.height\n    );\n  }\n\n  drawNextPill(ctx) {\n    let sprites = this.getSprites();\n    ctx.drawImage(\n      spritesheet,\n      sprites.left[0],\n      sprites.left[1],\n      sprites.left[2],\n      sprites.left[3],\n      27,\n      2,\n      this.width,\n      this.height\n    );\n    ctx.drawImage(\n      spritesheet,\n      sprites.right[0],\n      sprites.right[1],\n      sprites.right[2],\n      sprites.right[3],\n      27 + 25,\n      2,\n      this.width,\n      this.height\n    );\n  }\n\n  draw(ctx) {\n    if (this.orientation === \"horizontal\") {\n      this.drawHorizontal(ctx);\n    } else if (this.orientation === \"vertical\") {\n      this.drawVertical(ctx);\n    }\n  }\n\n  update(timestamp) {\n    if (!this.lastDrop) this.lastDrop = timestamp;\n\n    if (!this.stationary) {\n      let dropInterval = 1200 - (200 * this.dropSpeed);\n  \n      if ((timestamp - this.lastDrop) > dropInterval) {\n        this.drop();\n        this.lastDrop = timestamp;\n      }\n    }\n\n  }\n}","const VIRUS_SPRITES = {\n  red: {\n    0: [0, 88, 7, 7],\n    1: [0, 96, 7, 7]\n  },\n\n  yellow: {\n    0: [0, 112, 7, 7],\n    1: [0, 120, 7, 7]\n  },\n\n  blue: {\n    0: [0, 136, 7, 7],\n    1: [0, 144, 7, 7]\n  },\n\n  none: {\n    0: [108, 260, 8, 8]\n  }\n}\n\nexport default class Virus {\n  constructor(options) {\n    this.color = options.color;\n    this.coordinates = options.coordinates;\n    this.spritesheet = options.game.spritesheet;\n    this.width = options.game.squareWidth;\n    this.height = options.game.squareHeight;\n    this.margin = options.game.margin;\n    this.board = options.game.board;\n    this.game = options.game;\n\n    this.position = this.board.getPosition(this.coordinates);\n\n    this.frame = 0;\n    this.lastUpdated = null;\n    this.frameLength = 250;\n  }\n\n  deleteFromGame() {\n    let gameVirusesIndex = this.game.viruses.indexOf(this);\n    let gameObjectsIndex = this.game.gameObjects.indexOf(this);\n\n    this.game.viruses.splice(gameVirusesIndex, 1);\n    this.game.gameObjects.splice(gameObjectsIndex, 1);\n  }\n\n  getSprite() {\n    const frame = this.frame;\n    switch(this.color) {\n      case \"red\":\n        return VIRUS_SPRITES.red[frame];\n      case \"yellow\":\n        return VIRUS_SPRITES.yellow[frame];\n      case \"blue\":\n        return VIRUS_SPRITES.blue[frame];\n      default:\n        return VIRUS_SPRITES.none[frame];\n    }\n  }\n\n  update(timestamp) {\n    if (!this.lastUpdated) this.lastUpdated = timestamp;\n\n    if ((timestamp - this.lastUpdated) > this.frameLength) {\n      this.frame = (this.frame + 1) % 2;\n      this.lastUpdated = timestamp;\n    }\n  }\n\n  draw(ctx){\n    const sprite = this.getSprite();\n    ctx.drawImage(\n      this.spritesheet,\n      sprite[0],\n      sprite[1],\n      sprite[2],\n      sprite[3],\n      this.position.x,\n      this.position.y,\n      this.width,\n      this.height\n    )\n  }\n}"],"sourceRoot":""}